<div class="card" style="margin-top: 20px;">
    <h3>Edit Exam</h3>
    <form 
        hx-put="/exams/{{.Exam.ID}}" 
        hx-target="#exams-list"
        hx-swap="innerHTML"
        hx-on::after-request="document.getElementById('exam-form-container').innerHTML = '';">
        
        <div class="form-group">
            <label for="patient_id">Patient:</label>
            <select id="patient_id" name="patient_id" required>
                <option value="">Select a patient...</option>
                {{range .Patients}}
                <option value="{{.ID}}" {{if eq .ID $.ExamPatientID}}selected{{end}}>{{.FirstName}} {{.LastName}} (DOB: {{.DOB}})</option>
                {{end}}
            </select>
        </div>

        <div class="form-group">
            <label for="exam_type_id">Exam Type:</label>
            <select id="exam_type_id" name="exam_type_id" required>
                <option value="">Select an exam type...</option>
                {{range .ExamTypes}}
                <option value="{{.ID}}" {{if eq .ID $.ExamTypeID}}selected{{end}}>{{.Description}}</option>
                {{end}}
            </select>
        </div>

        <div class="form-group">
            <label for="result">Result:</label>
            <textarea id="result" name="result" rows="3" required>{{.Exam.Result}}</textarea>
        </div>

        <div class="actions">
            <button type="submit" class="btn btn-success">Update Exam</button>
            <button 
                type="button" 
                class="btn btn-danger"
                onclick="document.getElementById('exam-form-container').innerHTML = '';">
                Cancel
            </button>
        </div>
    </form>
</div>
